{
    "connections": [
        {
            "in_id": "{ca1533a4-30da-428e-ae1d-fef166fa71a3}",
            "in_index": 0,
            "out_id": "{9eae83ec-6a74-4b73-8a2b-fed2ec1e9f6a}",
            "out_index": 0
        },
        {
            "in_id": "{ca1533a4-30da-428e-ae1d-fef166fa71a3}",
            "in_index": 1,
            "out_id": "{80d1ab98-3f8e-4cbe-8487-13e9bbfc12c9}",
            "out_index": 0
        },
        {
            "in_id": "{d5b10453-6a89-432a-a2c8-aa11d54f859a}",
            "in_index": 0,
            "out_id": "{ca1533a4-30da-428e-ae1d-fef166fa71a3}",
            "out_index": 0
        },
        {
            "in_id": "{d5b10453-6a89-432a-a2c8-aa11d54f859a}",
            "in_index": 1,
            "out_id": "{a290c6fe-4162-40d7-8e3a-7beae9b05d8d}",
            "out_index": 0
        },
        {
            "in_id": "{9eae83ec-6a74-4b73-8a2b-fed2ec1e9f6a}",
            "in_index": 0,
            "out_id": "{b76e768c-f21f-4cde-8f77-9049b29eb536}",
            "out_index": 0
        },
        {
            "in_id": "{77a89cf6-9afd-4bca-9358-0cd39d2068bf}",
            "in_index": 0,
            "out_id": "{d5b10453-6a89-432a-a2c8-aa11d54f859a}",
            "out_index": 0
        },
        {
            "in_id": "{9eae83ec-6a74-4b73-8a2b-fed2ec1e9f6a}",
            "in_index": 1,
            "out_id": "{ff4af756-8893-4b70-b5a2-66274bcb6189}",
            "out_index": 0
        }
    ],
    "nodes": [
        {
            "id": "{77a89cf6-9afd-4bca-9358-0cd39d2068bf}",
            "model": {
                "ROxPos": 0,
                "ROyPos": 1,
                "ROzPos": 0,
                "lightxPos": 0,
                "lightyPos": 3,
                "lightzPos": 10,
                "name": "Ray March",
                "shaderCode": "#define MAX_STEPS 100\n#define MAX_DISTANCE 100.0\n#define SURFACE_DISTANCE 0.01\n\nfloat GetDistance(vec3 _p)\n{\nfloat distance = 1000;\nfloat sphere0 = sdSphere(_p, vec3(3, 0, 10), 1);\nfloat sphere1 = sdSphere(_p, vec3(-3, 0, 10), 1);\ndistance = sdUnion(sphere0, sphere1);\nfloat sphere2 = sdSphere(_p, vec3(0, 0, 10), 1);\ndistance = sdUnion(distance, sphere2);\nfloat plane0 = sdPlane(_p, -1);\ndistance = sdUnion(distance, plane0);\n\n   // Return distance of closest scene object\n  if (distance == 1000)\n  {\n    return 0;\n  }\n   return distance;\n}\n\nfloat RayMarch(vec3 _rayOrigin, vec3 _rayDirection)\n{\n   float originDistance = 0.0;\n   for (int i = 0; i < MAX_STEPS; i++)\n   {\n       // Marching point\n       vec3 p = _rayOrigin + (originDistance * _rayDirection);\n\n       // Calculate distance from current point (p) to scene object\n       float sceneDistance = GetDistance(p);\n       originDistance += sceneDistance;\n\n       // Scene has been hit, or surpassed MAX_DISTANCE\n       if (sceneDistance < SURFACE_DISTANCE || originDistance > MAX_DISTANCE)\n       {\n           break;\n       }\n   }\n   return originDistance;\n}\n\nvec3 GetNormal(vec3 _p)\n{\n    // Distance from point _p to surface\n    float surfaceDistance = GetDistance(_p);\n\n    // Distance to sample surrounding points\n    vec2 threshold = vec2(0.01, 0);\n\n    // Sample points\n    vec3 normal = surfaceDistance - vec3(GetDistance(_p - threshold.xyy),\n                                       GetDistance(_p - threshold.yxy),\n                                       GetDistance(_p - threshold.yyx));\n\n    return normalize(normal);\n}\n\nfloat GetLight(vec3 _p)\n{\n   // Define light\n   vec3 lightPosition = vec3(0, 3, 10);\n   lightPosition.xz += vec2(sin(iTime), cos(iTime)) * 2;\n   vec3 lightVector = normalize(lightPosition - _p);\n\n   // Calculate normal of intersection point\n   vec3 normal = GetNormal(_p);\n\n   // Clamp diffuse value from -1 to 1, -> 0 to 1\n   float diffuse = clamp(dot(normal, lightVector), 0.0, 1.0);\n\n   // Calculate distance between _p and light source\n   float lightDistance = RayMarch(_p + (normal * SURFACE_DISTANCE * 2.0), lightVector);\n\n   // Hit something\n   if (lightDistance < length(lightPosition - _p))\n   {\n       diffuse *= 0.1;\n   }\n\n   return diffuse;\n}\n\nvoid main()\n{\n   // Normalize pixel coordinates (from -0.5 to 0.5), flip y\n   vec2 uv = vec2(iUV.x - 0.5, (iUV.y - 0.5) * -1);\n\n   // Default black\n   vec3 colour = vec3(0);\n\n   // Camera setup\n   vec3 rayOrigin = vec3(0, 1, 0);\n   vec3 rayDirection = normalize(vec3(uv.x, uv.y, 1));\n\n   // Fire rays, return distance to intersection\n   float rayDistance = RayMarch(rayOrigin, rayDirection);\n\n   // Get point of intersection\n   vec3 p = rayOrigin + (rayDirection * rayDistance);\n\n   // Calculate lighting and shadows\n   float diffuse = GetLight(p);\n   colour = vec3(diffuse);\n\n   fragColour = vec4(colour, 1.0);\n}\n"
            },
            "position": {
                "x": 263.2639999999999,
                "y": 693.2719999999999
            }
        },
        {
            "id": "{ff4af756-8893-4b70-b5a2-66274bcb6189}",
            "model": {
                "id": 1,
                "name": "Sphere",
                "radius": 1,
                "shaderCode": "float sphere1 = sdSphere(_p, vec3(-3, 0, 10), 1);\n",
                "variableName": "sphere1",
                "xPos": -3,
                "yPos": 0,
                "zPos": 10
            },
            "position": {
                "x": -894,
                "y": 240
            }
        },
        {
            "id": "{80d1ab98-3f8e-4cbe-8487-13e9bbfc12c9}",
            "model": {
                "id": 2,
                "name": "Sphere",
                "radius": 1,
                "shaderCode": "float sphere2 = sdSphere(_p, vec3(0, 0, 10), 1);\n",
                "variableName": "sphere2",
                "xPos": 0,
                "yPos": 0,
                "zPos": 10
            },
            "position": {
                "x": -890.9043200000001,
                "y": 517.8742399999999
            }
        },
        {
            "id": "{ca1533a4-30da-428e-ae1d-fef166fa71a3}",
            "model": {
                "name": "Union",
                "shaderCode": "float sphere0 = sdSphere(_p, vec3(3, 0, 10), 1);\nfloat sphere1 = sdSphere(_p, vec3(-3, 0, 10), 1);\ndistance = sdUnion(sphere0, sphere1);\nfloat sphere2 = sdSphere(_p, vec3(0, 0, 10), 1);\ndistance = sdUnion(distance, sphere2);\n",
                "shapeA": "distance",
                "shapeABooleanOp": true,
                "shapeAShaderCode": "float sphere0 = sdSphere(_p, vec3(3, 0, 10), 1);\nfloat sphere1 = sdSphere(_p, vec3(-3, 0, 10), 1);\ndistance = sdUnion(sphere0, sphere1);\n",
                "shapeAfunctionCall": "",
                "shapeB": "sphere2",
                "shapeBBooleanOp": false,
                "shapeBShaderCode": "float sphere2 = sdSphere(_p, vec3(0, 0, 10), 1);\n",
                "shapeBfunctionCall": " = sdSphere(_p, vec3(0, 0, 10), 1);\n"
            },
            "position": {
                "x": -253,
                "y": 422
            }
        },
        {
            "id": "{9eae83ec-6a74-4b73-8a2b-fed2ec1e9f6a}",
            "model": {
                "name": "Union",
                "shaderCode": "float sphere0 = sdSphere(_p, vec3(3, 0, 10), 1);\nfloat sphere1 = sdSphere(_p, vec3(-3, 0, 10), 1);\ndistance = sdUnion(sphere0, sphere1);\n",
                "shapeA": "sphere0",
                "shapeABooleanOp": false,
                "shapeAShaderCode": "float sphere0 = sdSphere(_p, vec3(3, 0, 10), 1);\n",
                "shapeAfunctionCall": " = sdSphere(_p, vec3(3, 0, 10), 1);\n",
                "shapeB": "sphere1",
                "shapeBBooleanOp": false,
                "shapeBShaderCode": "float sphere1 = sdSphere(_p, vec3(-3, 0, 10), 1);\n",
                "shapeBfunctionCall": " = sdSphere(_p, vec3(-3, 0, 10), 1);\n"
            },
            "position": {
                "x": -254,
                "y": 143
            }
        },
        {
            "id": "{b76e768c-f21f-4cde-8f77-9049b29eb536}",
            "model": {
                "id": 0,
                "name": "Sphere",
                "radius": 1,
                "shaderCode": "float sphere0 = sdSphere(_p, vec3(3, 0, 10), 1);\n",
                "variableName": "sphere0",
                "xPos": 3,
                "yPos": 0,
                "zPos": 10
            },
            "position": {
                "x": -898,
                "y": -40
            }
        },
        {
            "id": "{d5b10453-6a89-432a-a2c8-aa11d54f859a}",
            "model": {
                "name": "Union",
                "shaderCode": "float sphere0 = sdSphere(_p, vec3(3, 0, 10), 1);\nfloat sphere1 = sdSphere(_p, vec3(-3, 0, 10), 1);\ndistance = sdUnion(sphere0, sphere1);\nfloat sphere2 = sdSphere(_p, vec3(0, 0, 10), 1);\ndistance = sdUnion(distance, sphere2);\nfloat plane0 = sdPlane(_p, -1);\ndistance = sdUnion(distance, plane0);\n",
                "shapeA": "distance",
                "shapeABooleanOp": true,
                "shapeAShaderCode": "float sphere0 = sdSphere(_p, vec3(3, 0, 10), 1);\nfloat sphere1 = sdSphere(_p, vec3(-3, 0, 10), 1);\ndistance = sdUnion(sphere0, sphere1);\nfloat sphere2 = sdSphere(_p, vec3(0, 0, 10), 1);\ndistance = sdUnion(distance, sphere2);\n",
                "shapeAfunctionCall": "",
                "shapeB": "plane0",
                "shapeBBooleanOp": false,
                "shapeBShaderCode": "float plane0 = sdPlane(_p, -1);\n",
                "shapeBfunctionCall": " = sdPlane(_p, -1);\n"
            },
            "position": {
                "x": -258,
                "y": 696
            }
        },
        {
            "id": "{a290c6fe-4162-40d7-8e3a-7beae9b05d8d}",
            "model": {
                "id": 0,
                "name": "Infinite Plane",
                "shaderCode": "float plane0 = sdPlane(_p, -1);\n",
                "variableName": "plane0",
                "yPos": -1
            },
            "position": {
                "x": -689,
                "y": 789
            }
        }
    ]
}
